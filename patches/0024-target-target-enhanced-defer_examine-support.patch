From 4b7bf6e50f37d146f6ebe1a7c2217d56e165e976 Mon Sep 17 00:00:00 2001
From: Daniel Goehring <dgoehrin@os.amperecomputing.com>
Date: Fri, 14 Jan 2022 11:45:15 -0500
Subject: [PATCH 24/32] target/target: enhanced defer_examine support

Change-Id: I41d5a31d83f180a1e5665f66bce9cf145e21eedc
Signed-off-by: Daniel Goehring <dgoehrin@os.amperecomputing.com>
---
 src/target/target.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/src/target/target.c b/src/target/target.c
index c9ad5fc65..8334d2222 100644
--- a/src/target/target.c
+++ b/src/target/target.c
@@ -5738,6 +5738,7 @@ static int jim_target_examine(Jim_Interp *interp, int argc, Jim_Obj *const *argv
 		return jim_target_tap_disabled(interp);
 
 	if (allow_defer && target->defer_examine) {
+		target_reset_examined(target);
 		LOG_INFO("Deferring arp_examine of %s", target_name(target));
 		LOG_INFO("Use arp_examine command to examine it manually!");
 		return JIM_OK;
-- 
2.25.1

